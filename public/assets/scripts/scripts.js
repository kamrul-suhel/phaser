"use strict";
"use strict";
"use strict";var game=new Phaser.Game(600,400,Phaser.AUTO),GameState={preload:function(){this.load.image("background","assets/images/background.png"),this.load.image("arrow","assets/images/arrow.png"),this.load.spritesheet("pig","assets/images/pig_spritesheet.png",297,200,3),this.load.spritesheet("chicken","assets/images/chicken_spritesheet.png",131,200,3),this.load.spritesheet("horse","assets/images/horse_spritesheet.png",212,200,3),this.load.spritesheet("sheep","assets/images/sheep_spritesheet.png",244,200,3),this.load.audio("pigSound",["assets/audio/pig.mp3","assets/audio/pig.ogg"]),this.load.audio("chickenSound",["assets/audio/chicken.mp3","assets/audio/chicken.ogg"]),this.load.audio("horseSound",["assets/audio/horse.mp3","assets/audio/horse.ogg"]),this.load.audio("sheepSound",["assets/audio/sheep.mp3","assets/audio/sheep.ogg"])},create:function(){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.background=this.game.add.sprite(0,0,"background");this.animals=this.game.add.group();var e,i=this;[{key:"chicken",text:"Chicken",audio:"chickenSound"},{key:"pig",text:"Pig",audio:"pigSound"},{key:"horse",text:"Horse",audio:"horseSound"},{key:"sheep",text:"Sheep",audio:"sheepSound"}].forEach(function(t){(e=i.animals.create(-1e3,i.game.world.centerY,t.key)).anchor.setTo(.5),e.customParams={text:t.text,sound:i.game.add.audio(t.audio)},e.animations.add("animate",[0,1,2,1,0,1],3,!1),e.inputEnabled=!0,e.input.pixelPerfectClick=!0,e.events.onInputDown.add(i.animalClick,i)}),this.currentAnimal=this.animals.next(),this.currentAnimal.position.set(this.game.world.centerX,this.game.world.centerY),this.showText(this.currentAnimal),this.rightArrow=this.game.add.sprite(this.game.world.centerY+350,this.game.world.centerY,"arrow"),this.rightArrow.anchor.setTo(.5),this.rightArrow.customParams={direction:1},this.rightArrow.inputEnabled=!0,this.rightArrow.input.pixelPerfectClick=!0,this.rightArrow.events.onInputDown.add(this.switchAnimal,this),this.leftArrow=this.game.add.sprite(this.game.world.centerX-250,this.game.world.centerY,"arrow"),this.leftArrow.anchor.setTo(.5),this.leftArrow.scale.setTo(-1),this.leftArrow.customParams={direction:0},this.leftArrow.inputEnabled=!0,this.leftArrow.input.pixelPerfectClick=!0,this.leftArrow.events.onInputDown.add(this.switchAnimal,this)},update:function(){},switchAnimal:function(t,e){var i,s;if(this.isMoving)return!1;this.isMoving=!0,this.animalText.visible=!1,1==t.customParams.direction?((i=this.animals.next()).x=-i.width/2,s=640+this.currentAnimal.width/2):((i=this.animals.previous()).x=640+i.width/2,s=-this.currentAnimal.width/2);var a=this.game.add.tween(i);a.to({x:this.game.world.centerX}),a.onComplete.add(function(){this.showText(i),this.isMoving=!1},this),a.start();var r=this.game.add.tween(this.currentAnimal);r.to({x:s}),r.start(),this.currentAnimal=i},animalClick:function(t,e){t.play("animate"),t.customParams.sound.play()},showText:function(t){this.animalText||(this.animalText=this.game.add.text(this.game.width/2,.85*this.game.height,"",{font:"bold 30pt Arial",fill:"#fff",align:"center"}),this.animalText.anchor.setTo(.5)),this.animalText.setText(t.customParams.text),this.animalText.visible=!0}};game.state.add("GameState",GameState),game.state.start("GameState");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFycm93LmpzIiwiZmlyc3QtZ2FtZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiZ2FtZSIsIlBoYXNlciIsIkdhbWUiLCJBVVRPIiwicHJlbG9hZCIsIkdhbWVTdGF0ZSIsImltYWdlIiwidGhpcyIsImxvYWQiLCJzcHJpdGVzaGVldCIsImF1ZGlvIiwiY3JlYXRlIiwic2NhbGUiLCJwYWdlQWxpZ25Ib3Jpem9udGFsbHkiLCJTSE9XX0FMTCIsInBhZ2VBbGlnblZlcnRpY2FsbHkiLCJiYWNrZ3JvdW5kIiwiYWRkIiwic3ByaXRlIiwiYW5pbWFsIiwiY3VzdG9tUGFyYW1zIiwidGV4dCIsInNlbGYiLCJrZXkiLCJhbmltYWxzIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJpbnB1dEVuYWJsZWQiLCJ3b3JsZCIsImNlbnRlclkiLCJpbnB1dCIsInBpeGVsUGVyZmVjdENsaWNrIiwiZXZlbnRzIiwib25JbnB1dERvd24iLCJhbmltYWxDbGljayIsImFuaW1hdGlvbnMiLCJjdXJyZW50QW5pbWFsIiwicG9zaXRpb24iLCJuZXh0IiwicmlnaHRBcnJvdyIsImFuY2hvciIsImxlZnRBcnJvdyIsInNldFRvIiwic3dpdGNoQW5pbWFsIiwidXBkYXRlIiwiaXNNb3ZpbmciLCJjZW50ZXJYIiwiYW5pbWFsVGV4dCIsImRpcmVjdGlvbiIsImFycm93IiwibmV3QW5pbWFsIiwiZW5kWCIsIm5ld0FuaW1hbE1vdmVtZW50IiwiZXZlbnQiLCJzaG93VGV4dCIsImN1cnJlbnRBbmltYWxNb3ZlbWVudCIsIngiLCJ3aWR0aCIsInByZXZpb3VzIiwic291bmQiLCJzdHlsZSIsInR3ZWVuIiwiZm9udCIsInRvIiwiZmlsbCIsIm9uQ29tcGxldGUiLCJhbGlnbiIsInNldFRleHQiLCJ2aXNpYmxlIiwic3RhdGUiLCJzdGFydCIsInBsYXkiLCJoZWlnaHQiXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7YUNBQSxJQUFJQSxLQUFPLElBQUlDLE9BQU9DLEtBQUssSUFBSyxJQUFLRCxPQUFP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S2lCLElBQUlJLEtBQUtkLEtBQUtQLEtBQUt5RCxNQUFRLEVBQXNCLElBQW5CbEQsS0FBS1AsS0FBS3dFLE9BQWUsR0FOM0UsQ0FDUlYsS0FBTSxrQkFDTkUsS0FBTSxPQUNORSxNQUFPLFdBSVAzRCxLQUFLd0MsV0FBV1AsT0FBT0UsTUFBTSxLQUVqQ25DLEtBQUt3QyxXQUFXb0IsUUFBUWhELEVBQU9DLGFBQWFDLE1BQzVDZCxLQUFLd0MsV0FBV3FCLFNBQVUsSUFJbENwRSxLQUFLcUUsTUFBTXBELElBQUksWUFBYVosV0FFNUJMLEtBQUtxRSxNQUFNQyxNQUFNIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjsiLCJcInVzZSBzdHJpY3RcIjsiLCJ2YXIgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSg2MDAsIDQwMCwgUGhhc2VyLkFVVE8pO1xuXG52YXIgR2FtZVN0YXRlID0ge1xuICAgIHByZWxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiYWNrZ3JvdW5kJywgJ2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZC5wbmcnKTtcblxuICAgICAgICAvLyB0aGlzLmxvYWQuaW1hZ2UoJ3BpZycsICdhc3NldHMvaW1hZ2VzL3BpZy5wbmcnKTtcbiAgICAgICAgLy8gdGhpcy5sb2FkLmltYWdlKCdjaGlja2VuJywgJ2Fzc2V0cy9pbWFnZXMvY2hpY2tlbi5wbmcnKTtcbiAgICAgICAgLy8gdGhpcy5sb2FkLmltYWdlKCdob3JzZScsICdhc3NldHMvaW1hZ2VzL2hvcnNlLnBuZycpO1xuICAgICAgICAvLyB0aGlzLmxvYWQuaW1hZ2UoJ3NoZWVwJywgJ2Fzc2V0cy9pbWFnZXMvc2hlZXAzLnBuZycpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2Fycm93JywgJ2Fzc2V0cy9pbWFnZXMvYXJyb3cucG5nJyk7XG5cblxuICAgICAgICAvL1Nwcml0ZXNoZWV0IGltYWdlc1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoJ3BpZycsICdhc3NldHMvaW1hZ2VzL3BpZ19zcHJpdGVzaGVldC5wbmcnLCAyOTcsIDIwMCwgMyk7XG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldCgnY2hpY2tlbicsICdhc3NldHMvaW1hZ2VzL2NoaWNrZW5fc3ByaXRlc2hlZXQucG5nJywgMTMxLCAyMDAsIDMpO1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoJ2hvcnNlJywgJ2Fzc2V0cy9pbWFnZXMvaG9yc2Vfc3ByaXRlc2hlZXQucG5nJywgMjEyLCAyMDAsIDMpO1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoJ3NoZWVwJywgJ2Fzc2V0cy9pbWFnZXMvc2hlZXBfc3ByaXRlc2hlZXQucG5nJywgMjQ0LCAyMDAsIDMpO1xuXG5cbiAgICAgICAgLy8gU291bmQgZmlsZSBsb2FkXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygncGlnU291bmQnLCBbJ2Fzc2V0cy9hdWRpby9waWcubXAzJywgJ2Fzc2V0cy9hdWRpby9waWcub2dnJ10pO1xuICAgICAgICB0aGlzLmxvYWQuYXVkaW8oJ2NoaWNrZW5Tb3VuZCcsIFsnYXNzZXRzL2F1ZGlvL2NoaWNrZW4ubXAzJywgJ2Fzc2V0cy9hdWRpby9jaGlja2VuLm9nZyddKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKCdob3JzZVNvdW5kJywgWydhc3NldHMvYXVkaW8vaG9yc2UubXAzJywgJ2Fzc2V0cy9hdWRpby9ob3JzZS5vZ2cnXSk7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc2hlZXBTb3VuZCcsIFsnYXNzZXRzL2F1ZGlvL3NoZWVwLm1wMycsICdhc3NldHMvYXVkaW8vc2hlZXAub2dnJ10pO1xuXG4gICAgfSxcblxuICAgIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XG4gICAgICAgIHRoaXMuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zY2FsZS5wYWdlQWxpZ25WZXJ0aWNhbGx5ID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSgwLCAwLCAnYmFja2dyb3VuZCcpO1xuXG4gICAgICAgIHZhciBhbmltYWxzRGF0YSA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdjaGlja2VuJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnQ2hpY2tlbicsXG4gICAgICAgICAgICAgICAgYXVkaW86ICdjaGlja2VuU291bmQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ3BpZycsXG4gICAgICAgICAgICAgICAgdGV4dDogJ1BpZycsXG4gICAgICAgICAgICAgICAgYXVkaW86ICdwaWdTb3VuZCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnaG9yc2UnLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdIb3JzZScsXG4gICAgICAgICAgICAgICAgYXVkaW86ICdob3JzZVNvdW5kJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdzaGVlcCcsXG4gICAgICAgICAgICAgICAgdGV4dDogJ1NoZWVwJyxcbiAgICAgICAgICAgICAgICBhdWRpbzogJ3NoZWVwU291bmQnXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5hbmltYWxzID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBhbmltYWw7XG4gICAgICAgIGFuaW1hbHNEYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGFuaW1hbCA9IHNlbGYuYW5pbWFscy5jcmVhdGUoLTEwMDAsIHNlbGYuZ2FtZS53b3JsZC5jZW50ZXJZLCBlbGVtZW50LmtleSk7XG4gICAgICAgICAgICBhbmltYWwuYW5jaG9yLnNldFRvKC41KTtcbiAgICAgICAgICAgIGFuaW1hbC5jdXN0b21QYXJhbXMgPSB7dGV4dDogZWxlbWVudC50ZXh0LCBzb3VuZDogc2VsZi5nYW1lLmFkZC5hdWRpbyhlbGVtZW50LmF1ZGlvKX07XG5cbiAgICAgICAgICAgIGFuaW1hbC5hbmltYXRpb25zLmFkZCgnYW5pbWF0ZScsIFswLCAxLCAyLCAxLCAwLCAxXSwgMywgZmFsc2UpO1xuXG4gICAgICAgICAgICBhbmltYWwuaW5wdXRFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGFuaW1hbC5pbnB1dC5waXhlbFBlcmZlY3RDbGljayA9IHRydWU7XG4gICAgICAgICAgICBhbmltYWwuZXZlbnRzLm9uSW5wdXREb3duLmFkZChzZWxmLmFuaW1hbENsaWNrLCBzZWxmKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50QW5pbWFsID0gdGhpcy5hbmltYWxzLm5leHQoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50QW5pbWFsLnBvc2l0aW9uLnNldChcbiAgICAgICAgICAgIHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLFxuICAgICAgICAgICAgdGhpcy5nYW1lLndvcmxkLmNlbnRlcllcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBBbmltYWwgdGV4dFxuICAgICAgICB0aGlzLnNob3dUZXh0KHRoaXMuY3VycmVudEFuaW1hbCk7XG5cblxuICAgICAgICAvLyByaWdodCBhcnJvdyBsb2FkXG4gICAgICAgIHRoaXMucmlnaHRBcnJvdyA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKFxuICAgICAgICAgICAgdGhpcy5nYW1lLndvcmxkLmNlbnRlclkgKyAzNTAsXG4gICAgICAgICAgICB0aGlzLmdhbWUud29ybGQuY2VudGVyWSxcbiAgICAgICAgICAgICdhcnJvdydcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5yaWdodEFycm93LmFuY2hvci5zZXRUbyguNSk7XG4gICAgICAgIHRoaXMucmlnaHRBcnJvdy5jdXN0b21QYXJhbXMgPSB7ZGlyZWN0aW9uOiAxfTtcblxuICAgICAgICB0aGlzLnJpZ2h0QXJyb3cuaW5wdXRFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yaWdodEFycm93LmlucHV0LnBpeGVsUGVyZmVjdENsaWNrID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yaWdodEFycm93LmV2ZW50cy5vbklucHV0RG93bi5hZGQodGhpcy5zd2l0Y2hBbmltYWwsIHRoaXMpO1xuXG4gICAgICAgIC8vIGxlZnQgYXJyb3dcbiAgICAgICAgdGhpcy5sZWZ0QXJyb3cgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZShcbiAgICAgICAgICAgIHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYIC0gMjUwLFxuICAgICAgICAgICAgdGhpcy5nYW1lLndvcmxkLmNlbnRlclksXG4gICAgICAgICAgICAnYXJyb3cnXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubGVmdEFycm93LmFuY2hvci5zZXRUbyguNSk7XG4gICAgICAgIHRoaXMubGVmdEFycm93LnNjYWxlLnNldFRvKC0xKTtcbiAgICAgICAgdGhpcy5sZWZ0QXJyb3cuY3VzdG9tUGFyYW1zID0ge2RpcmVjdGlvbjogMH1cblxuICAgICAgICB0aGlzLmxlZnRBcnJvdy5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmxlZnRBcnJvdy5pbnB1dC5waXhlbFBlcmZlY3RDbGljayA9IHRydWU7XG4gICAgICAgIHRoaXMubGVmdEFycm93LmV2ZW50cy5vbklucHV0RG93bi5hZGQodGhpcy5zd2l0Y2hBbmltYWwsIHRoaXMpO1xuXG5cbiAgICB9LFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgfSxcblxuICAgIHN3aXRjaEFuaW1hbDogZnVuY3Rpb24gKGFycm93LCBldmVudCkge1xuICAgICAgICB2YXIgbmV3QW5pbWFsLCBlbmRYO1xuXG4gICAgICAgIGlmICh0aGlzLmlzTW92aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzTW92aW5nID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLmFuaW1hbFRleHQudmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChhcnJvdy5jdXN0b21QYXJhbXMuZGlyZWN0aW9uID09IDEpIHtcbiAgICAgICAgICAgIG5ld0FuaW1hbCA9IHRoaXMuYW5pbWFscy5uZXh0KCk7XG4gICAgICAgICAgICBuZXdBbmltYWwueCA9IC1uZXdBbmltYWwud2lkdGggLyAyO1xuICAgICAgICAgICAgZW5kWCA9IDY0MCArIHRoaXMuY3VycmVudEFuaW1hbC53aWR0aCAvIDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdBbmltYWwgPSB0aGlzLmFuaW1hbHMucHJldmlvdXMoKTtcbiAgICAgICAgICAgIG5ld0FuaW1hbC54ID0gNjQwICsgbmV3QW5pbWFsLndpZHRoIC8gMjtcbiAgICAgICAgICAgIGVuZFggPSAtdGhpcy5jdXJyZW50QW5pbWFsLndpZHRoIC8gMjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuZXdBbmltYWxNb3ZlbWVudCA9IHRoaXMuZ2FtZS5hZGQudHdlZW4obmV3QW5pbWFsKTtcbiAgICAgICAgbmV3QW5pbWFsTW92ZW1lbnQudG8oe3g6IHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYfSk7XG4gICAgICAgIG5ld0FuaW1hbE1vdmVtZW50Lm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1RleHQobmV3QW5pbWFsKTtcbiAgICAgICAgICAgIHRoaXMuaXNNb3ZpbmcgPSBmYWxzZTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIG5ld0FuaW1hbE1vdmVtZW50LnN0YXJ0KCk7XG5cbiAgICAgICAgdmFyIGN1cnJlbnRBbmltYWxNb3ZlbWVudCA9IHRoaXMuZ2FtZS5hZGQudHdlZW4odGhpcy5jdXJyZW50QW5pbWFsKTtcbiAgICAgICAgY3VycmVudEFuaW1hbE1vdmVtZW50LnRvKHt4OiBlbmRYfSk7XG4gICAgICAgIGN1cnJlbnRBbmltYWxNb3ZlbWVudC5zdGFydCgpO1xuXG4gICAgICAgIHRoaXMuY3VycmVudEFuaW1hbCA9IG5ld0FuaW1hbDtcbiAgICB9LFxuXG4gICAgYW5pbWFsQ2xpY2s6IGZ1bmN0aW9uIChhbmltYWwsIGV2ZW50KSB7XG4gICAgICAgIGFuaW1hbC5wbGF5KCdhbmltYXRlJyk7XG4gICAgICAgIGFuaW1hbC5jdXN0b21QYXJhbXMuc291bmQucGxheSgpO1xuICAgIH0sXG5cbiAgICBzaG93VGV4dChhbmltYWwpIHtcbiAgICAgICAgdmFyIHN0eWxlID0ge1xuICAgICAgICAgICAgZm9udDogJ2JvbGQgMzBwdCBBcmlhbCcsXG4gICAgICAgICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcidcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCF0aGlzLmFuaW1hbFRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWFsVGV4dCA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmdhbWUud2lkdGggLyAyLCB0aGlzLmdhbWUuaGVpZ2h0ICogMC44NSwgJycsIHN0eWxlKTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWFsVGV4dC5hbmNob3Iuc2V0VG8oMC41KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hbFRleHQuc2V0VGV4dChhbmltYWwuY3VzdG9tUGFyYW1zLnRleHQpO1xuICAgICAgICB0aGlzLmFuaW1hbFRleHQudmlzaWJsZSA9IHRydWU7XG4gICAgfVxufVxuXG5nYW1lLnN0YXRlLmFkZCgnR2FtZVN0YXRlJywgR2FtZVN0YXRlKTtcblxuZ2FtZS5zdGF0ZS5zdGFydCgnR2FtZVN0YXRlJyk7Il19
